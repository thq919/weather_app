import 'dart:convert';
import 'package:injectable/injectable.dart';
import 'package:weather_app/features/weather_details/data/models/weather_details_response.dart';
import 'package:weather_app/features/weather_details/data/sources/weather_details_source.dart';

import '../../../../config.dart';
import '../../../../core/api/client.dart';

@testMock
@LazySingleton(as: WeatherDetailsSource)
class WeatherDetailsTest implements WeatherDetailsSource {
  final MainApi api;
  const WeatherDetailsTest(this.api);

  @override
  Future<WeatherDetailsResponse> getForecast(String query) async {
    final weatherDetailsResponse =
        WeatherDetailsResponse.fromJson(jsonDecode(json));
    return weatherDetailsResponse;
  }
}


/// вообще можно по другому сделать получение [json], 
/// но мне лень
 
const json =
    '''{"cod":"200","message":0,"cnt":40,"list":[{"dt":1683190800,"main":{"temp":285.37,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1016,"seaLevel":0,"grndLevel":0,"humidity":80,"tempKf":0.0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":100},"wind":{"speed":5.8,"deg":88,"gust":10.92},"visibility":10000,"pop":0.0,"rain":{"h":0.0},"sys":{"pod":"d"},"dtTxt":""},{"dt":1683201600,"main":{"temp":287.43,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1015,"seaLevel":0,"grndLevel":0,"humidity":71,"tempKf":0.0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":100},"wind":{"speed":5.82,"deg":104,"gust":8.63},"visibility":10000,"pop":0.0,"rain":{"h":0.0},"sys":{"pod":"d"},"dtTxt":""},{"dt":1683212400,"main":{"temp":290.0,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1013,"seaLevel":0,"grndLevel":0,"humidity":66,"tempKf":0.0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":100},"wind":{"speed":4.13,"deg":150,"gust":6.04},"visibility":10000,"pop":0.0,"rain":{"h":0.0},"sys":{"pod":"d"},"dtTxt":""},{"dt":1683223200,"main":{"temp":290.1,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1012,"seaLevel":0,"grndLevel":0,"humidity":75,"tempKf":0.0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":94},"wind":{"speed":3.65,"deg":211,"gust":5.56},"visibility":10000,"pop":0.3,"rain":{"h":0.0},"sys":{"pod":"d"},"dtTxt":""},{"dt":1683234000,"main":{"temp":287.38,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1013,"seaLevel":0,"grndLevel":0,"humidity":83,"tempKf":0.0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":99},"wind":{"speed":2.43,"deg":194,"gust":6.79},"visibility":10000,"pop":0.04,"rain":{"h":0.0},"sys":{"pod":"n"},"dtTxt":""},{"dt":1683244800,"main":{"temp":285.65,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1013,"seaLevel":0,"grndLevel":0,"humidity":89,"tempKf":0.0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":99},"wind":{"speed":2.46,"deg":203,"gust":7.98},"visibility":10000,"pop":0.28,"rain":{"h":0.0},"sys":{"pod":"n"},"dtTxt":""},{"dt":1683255600,"main":{"temp":283.97,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1013,"seaLevel":0,"grndLevel":0,"humidity":95,"tempKf":0.0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":91},"wind":{"speed":2.85,"deg":220,"gust":9.62},"visibility":10000,"pop":0.51,"rain":{"h":0.0},"sys":{"pod":"n"},"dtTxt":""},{"dt":1683266400,"main":{"temp":284.5,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1014,"seaLevel":0,"grndLevel":0,"humidity":93,"tempKf":0.0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}],"clouds":{"all":84},"wind":{"speed":2.78,"deg":203,"gust":9.27},"visibility":10000,"pop":0.29,"rain":{"h":0.0},"sys":{"pod":"d"},"dtTxt":""},{"dt":1683277200,"main":{"temp":286.39,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1015,"seaLevel":0,"grndLevel":0,"humidity":83,"tempKf":0.0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":100},"wind":{"speed":4.54,"deg":210,"gust":8.6},"visibility":10000,"pop":0.0,"rain":{"h":0.0},"sys":{"pod":"d"},"dtTxt":""},{"dt":1683288000,"main":{"temp":290.52,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1014,"seaLevel":0,"grndLevel":0,"humidity":59,"tempKf":0.0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":100},"wind":{"speed":4.74,"deg":219,"gust":7.32},"visibility":10000,"pop":0.09,"rain":{"h":0.0},"sys":{"pod":"d"},"dtTxt":""},{"dt":1683298800,"main":{"temp":290.51,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1014,"seaLevel":0,"grndLevel":0,"humidity":65,"tempKf":0.0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":85},"wind":{"speed":5.15,"deg":223,"gust":7.59},"visibility":10000,"pop":0.65,"rain":{"h":0.0},"sys":{"pod":"d"},"dtTxt":""},{"dt":1683309600,"main":{"temp":288.35,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1014,"seaLevel":0,"grndLevel":0,"humidity":76,"tempKf":0.0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":79},"wind":{"speed":3.75,"deg":210,"gust":7.53},"visibility":10000,"pop":0.67,"rain":{"h":0.0},"sys":{"pod":"d"},"dtTxt":""},{"dt":1683320400,"main":{"temp":285.39,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1015,"seaLevel":0,"grndLevel":0,"humidity":85,"tempKf":0.0},"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03n"}],"clouds":{"all":43},"wind":{"speed":2.75,"deg":200,"gust":8.41},"visibility":10000,"pop":0.13,"rain":{"h":0.0},"sys":{"pod":"n"},"dtTxt":""},{"dt":1683331200,"main":{"temp":284.15,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1015,"seaLevel":0,"grndLevel":0,"humidity":87,"tempKf":0.0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"clouds":{"all":71},"wind":{"speed":2.08,"deg":195,"gust":7.89},"visibility":10000,"pop":0.04,"rain":{"h":0.0},"sys":{"pod":"n"},"dtTxt":""},{"dt":1683342000,"main":{"temp":283.97,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1015,"seaLevel":0,"grndLevel":0,"humidity":90,"tempKf":0.0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":100},"wind":{"speed":1.92,"deg":185,"gust":7.84},"visibility":10000,"pop":0.0,"rain":{"h":0.0},"sys":{"pod":"n"},"dtTxt":""},{"dt":1683352800,"main":{"temp":285.08,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1014,"seaLevel":0,"grndLevel":0,"humidity":86,"tempKf":0.0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":100},"wind":{"speed":2.23,"deg":160,"gust":7.59},"visibility":10000,"pop":0.04,"rain":{"h":0.0},"sys":{"pod":"d"},"dtTxt":""},{"dt":1683363600,"main":{"temp":285.12,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1014,"seaLevel":0,"grndLevel":0,"humidity":93,"tempKf":0.0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":100},"wind":{"speed":3.03,"deg":158,"gust":8.94},"visibility":10000,"pop":0.74,"rain":{"h":0.0},"sys":{"pod":"d"},"dtTxt":""},{"dt":1683374400,"main":{"temp":285.2,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1014,"seaLevel":0,"grndLevel":0,"humidity":96,"tempKf":0.0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":100},"wind":{"speed":4.53,"deg":173,"gust":10.44},"visibility":10000,"pop":1.0,"rain":{"h":0.0},"sys":{"pod":"d"},"dtTxt":""},{"dt":1683385200,"main":{"temp":286.28,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1014,"seaLevel":0,"grndLevel":0,"humidity":92,"tempKf":0.0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":100},"wind":{"speed":5.13,"deg":183,"gust":11.37},"visibility":10000,"pop":0.23,"rain":{"h":0.0},"sys":{"pod":"d"},"dtTxt":""},{"dt":1683396000,"main":{"temp":285.97,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1014,"seaLevel":0,"grndLevel":0,"humidity":93,"tempKf":0.0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":100},"wind":{"speed":4.74,"deg":187,"gust":11.94},"visibility":10000,"pop":0.32,"rain":{"h":0.0},"sys":{"pod":"d"},"dtTxt":""},{"dt":1683406800,"main":{"temp":285.18,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1014,"seaLevel":0,"grndLevel":0,"humidity":96,"tempKf":0.0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":100},"wind":{"speed":3.62,"deg":200,"gust":9.98},"visibility":10000,"pop":0.04,"rain":{"h":0.0},"sys":{"pod":"n"},"dtTxt":""},{"dt":1683417600,"main":{"temp":283.87,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1015,"seaLevel":0,"grndLevel":0,"humidity":98,"tempKf":0.0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":100},"wind":{"speed":2.14,"deg":217,"gust":6.6},"visibility":10000,"pop":0.0,"rain":{"h":0.0},"sys":{"pod":"n"},"dtTxt":""},{"dt":1683428400,"main":{"temp":282.79,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1016,"seaLevel":0,"grndLevel":0,"humidity":98,"tempKf":0.0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":96},"wind":{"speed":1.77,"deg":247,"gust":4.18},"visibility":10000,"pop":0.0,"rain":{"h":0.0},"sys":{"pod":"n"},"dtTxt":""},{"dt":1683439200,"main":{"temp":283.47,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1016,"seaLevel":0,"grndLevel":0,"humidity":92,"tempKf":0.0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":90},"wind":{"speed":1.64,"deg":248,"gust":3.83},"visibility":10000,"pop":0.0,"rain":{"h":0.0},"sys":{"pod":"d"},"dtTxt":""},{"dt":1683450000,"main":{"temp":288.42,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1017,"seaLevel":0,"grndLevel":0,"humidity":67,"tempKf":0.0},"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03d"}],"clouds":{"all":49},"wind":{"speed":2.26,"deg":253,"gust":3.77},"visibility":10000,"pop":0.0,"rain":{"h":0.0},"sys":{"pod":"d"},"dtTxt":""},{"dt":1683460800,"main":{"temp":292.56,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1017,"seaLevel":0,"grndLevel":0,"humidity":51,"tempKf":0.0},"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03d"}],"clouds":{"all":32},"wind":{"speed":3.37,"deg":258,"gust":4.74},"visibility":10000,"pop":0.0,"rain":{"h":0.0},"sys":{"pod":"d"},"dtTxt":""},{"dt":1683471600,"main":{"temp":291.36,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1018,"seaLevel":0,"grndLevel":0,"humidity":60,"tempKf":0.0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":93},"wind":{"speed":2.82,"deg":262,"gust":4.45},"visibility":10000,"pop":0.32,"rain":{"h":0.0},"sys":{"pod":"d"},"dtTxt":""},{"dt":1683482400,"main":{"temp":290.37,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1019,"seaLevel":0,"grndLevel":0,"humidity":65,"tempKf":0.0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":97},"wind":{"speed":2.54,"deg":285,"gust":4.57},"visibility":10000,"pop":0.26,"rain":{"h":0.0},"sys":{"pod":"d"},"dtTxt":""},{"dt":1683493200,"main":{"temp":287.03,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1020,"seaLevel":0,"grndLevel":0,"humidity":83,"tempKf":0.0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":99},"wind":{"speed":1.74,"deg":212,"gust":1.98},"visibility":10000,"pop":0.0,"rain":{"h":0.0},"sys":{"pod":"n"},"dtTxt":""},{"dt":1683504000,"main":{"temp":285.35,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1020,"seaLevel":0,"grndLevel":0,"humidity":91,"tempKf":0.0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":99},"wind":{"speed":2.09,"deg":210,"gust":5.91},"visibility":10000,"pop":0.0,"rain":{"h":0.0},"sys":{"pod":"n"},"dtTxt":""},{"dt":1683514800,"main":{"temp":284.64,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1019,"seaLevel":0,"grndLevel":0,"humidity":81,"tempKf":0.0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":100},"wind":{"speed":2.89,"deg":211,"gust":9.78},"visibility":10000,"pop":0.0,"rain":{"h":0.0},"sys":{"pod":"n"},"dtTxt":""},{"dt":1683525600,"main":{"temp":285.11,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1018,"seaLevel":0,"grndLevel":0,"humidity":83,"tempKf":0.0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":100},"wind":{"speed":3.81,"deg":192,"gust":11.05},"visibility":10000,"pop":0.0,"rain":{"h":0.0},"sys":{"pod":"d"},"dtTxt":""},{"dt":1683536400,"main":{"temp":284.53,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1017,"seaLevel":0,"grndLevel":0,"humidity":92,"tempKf":0.0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":100},"wind":{"speed":5.04,"deg":200,"gust":13.77},"visibility":10000,"pop":0.75,"rain":{"h":0.0},"sys":{"pod":"d"},"dtTxt":""},{"dt":1683547200,"main":{"temp":285.86,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1016,"seaLevel":0,"grndLevel":0,"humidity":93,"tempKf":0.0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":100},"wind":{"speed":5.24,"deg":208,"gust":12.93},"visibility":10000,"pop":0.67,"rain":{"h":0.0},"sys":{"pod":"d"},"dtTxt":""},{"dt":1683558000,"main":{"temp":286.23,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1015,"seaLevel":0,"grndLevel":0,"humidity":96,"tempKf":0.0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":100},"wind":{"speed":3.91,"deg":224,"gust":9.96},"visibility":10000,"pop":0.51,"rain":{"h":0.0},"sys":{"pod":"d"},"dtTxt":""},{"dt":1683568800,"main":{"temp":288.68,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1014,"seaLevel":0,"grndLevel":0,"humidity":85,"tempKf":0.0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":97},"wind":{"speed":3.87,"deg":256,"gust":8.65},"visibility":10000,"pop":0.24,"rain":{"h":0.0},"sys":{"pod":"d"},"dtTxt":""},{"dt":1683579600,"main":{"temp":285.8,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1015,"seaLevel":0,"grndLevel":0,"humidity":95,"tempKf":0.0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":8},"wind":{"speed":3.41,"deg":245,"gust":9.62},"visibility":10000,"pop":0.41,"rain":{"h":0.0},"sys":{"pod":"n"},"dtTxt":""},{"dt":1683590400,"main":{"temp":284.41,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1015,"seaLevel":0,"grndLevel":0,"humidity":94,"tempKf":0.0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}],"clouds":{"all":10},"wind":{"speed":3.03,"deg":249,"gust":10.75},"visibility":10000,"pop":0.39,"rain":{"h":0.0},"sys":{"pod":"n"},"dtTxt":""},{"dt":1683601200,"main":{"temp":283.87,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1015,"seaLevel":0,"grndLevel":0,"humidity":96,"tempKf":0.0},"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03n"}],"clouds":{"all":43},"wind":{"speed":2.78,"deg":246,"gust":10.53},"visibility":10000,"pop":0.0,"rain":{"h":0.0},"sys":{"pod":"n"},"dtTxt":""},{"dt":1683612000,"main":{"temp":285.06,"feelsLike":0.0,"tempMin":0.0,"tempMax":0.0,"pressure":1014,"seaLevel":0,"grndLevel":0,"humidity":92,"tempKf":0.0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}],"clouds":{"all":71},"wind":{"speed":1.74,"deg":226,"gust":5.07},"visibility":10000,"pop":0.0,"rain":{"h":0.0},"sys":{"pod":"d"},"dtTxt":""}],"city":{"id":2643743,"name":"London","coord":{"lat":51.5085,"lon":-0.1257},"country":"GB","population":1000000,"timezone":3600,"sunrise":1683174448,"sunset":1683228424}}''';
